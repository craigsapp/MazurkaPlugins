<!---------------------------------------------------------------------------->
<html>
<head>
<title> Sig++ example program: MzSpectrogramFFTW.h </title>
<meta name="Document-Owner" content="Craig Sapp (craig@ccrma.stanford.edu)"> 
<meta name="Author" content="Craig Stuart Sapp (craig@ccrma.stanford.edu)">
<meta name="Creation-Date" content=" Tue May  9 19:38:11 PDT 2000 ">
<meta name="Revision-Date" content=" Wed Dec 27 07:42:42 PST 2006
 ">
</head>

<body bgcolor=#ffffff alink=#333399 link=#333399 vlink=#333399 text=#220000>
<!-- header *************************************************** -->

<center>
<table width=760 cellpadding=0 cellspacing=0 border=0>
<tr valign=top>
<td>
   <a href=http://www.charm.rhul.ac.uk><img alt="" border=0 src=../../images/logo.gif></a>
</td>
<td>
   <a href=http://mazurka.org.uk><img alt="" border=0 src=../../images/banner.gif></a>
</td>
</tr>
</table>
</center>

<center>
<table><tr><td>


<pre>
<font color=#229933>//</font>
<font color=#229933>// Programmer:    Craig Stuart Sapp &lt;craig@ccrma.stanford.edu&gt;</font>
<font color=#229933>// Creation Date: Sun Jun 11 21:02:20 PDT 2006</font>
<font color=#229933>// Last Modified: Fri Jun 23 01:39:57 PDT 2006 (subclassed to MazurkaPlugin)</font>
<font color=#229933>// Filename:      MzSpectrogramFFTW.h</font>
<font color=#229933>// URL:           <a href=http://sv.mazurka.org.uk/include/MzSpectrogramFFTW.h>http://sv.mazurka.org.uk/include/MzSpectrogramFFTW.h</a></font>
<font color=#229933>// Documentation: <a href=http://sv.mazurka.org.uk/MzSpectrogramFFTW>http://sv.mazurka.org.uk/MzSpectrogramFFTW</a></font>
<font color=#229933>// Syntax:        ANSI99 C++; vamp 0.9 plugin</font>
<font color=#229933>//</font>
<font color=#229933>// Description:   Demonstration of how to create spectral data from time data</font>
<font color=#229933>//                supplied by the host application using the FFTW library</font>
<font color=#229933>//                for Fourier Transforms.</font>
<font color=#229933>// </font>

<font color=#cccccc>#ifndef _MZSPECTROGRAMFFTW_H_INCLUDED</font>
<font color=#cccccc>#define _MZSPECTROGRAMFFTW_H_INCLUDED</font>

#include "MazurkaPlugin.h"      <font color=#229933>// Mazurka plugin interface for Sonic Visualiser</font>
#include "MazurkaTransformer.h" <font color=#229933>// Mazurka interface to FFTW </font>


class MzSpectrogramFFTW : public MazurkaPlugin {

   public: 

   <font color=#229933>// plugin interface functions:</font>

                    MzSpectrogramFFTW     (float samplerate);
      virtual      ~MzSpectrogramFFTW     ();

      <font color=#229933>// required polymorphic functions inherited from PluginBase:</font>
      std::string   getName               (void) const;
      std::string   getMaker              (void) const;
      std::string   getCopyright          (void) const;
      std::string   getDescription        (void) const;
      int           getPluginVersion      (void) const;

      <font color=#229933>// optional parameter interface functions:</font>
      ParameterList getParameterDescriptors (void) const;


      <font color=#229933>// required polymorphic functions inherited from Plugin:</font>
      InputDomain   getInputDomain        (void) const;
      OutputList    getOutputDescriptors  (void) const;
      bool          initialise            (size_t channels, 
                                           size_t stepsize, 
                                           size_t blocksize);
      FeatureSet    process               (float **inputbufs, 
                                           Vamp::RealTime timestamp);
      FeatureSet    getRemainingFeatures  (void);
      void          reset                 (void);

      <font color=#229933>// optional polymorphic functions from Plugin:</font>
      <font color=#229933>// size_t     getPreferredStepSize  (void) const { return 0; }</font>
      <font color=#229933>// size_t     getPreferredBlockSize (void) const { return 0; }</font>
      <font color=#229933>// size_t     getMinChannelCount    (void) const { return 1; }</font>
      <font color=#229933>// size_t     getMaxChannelCount    (void) const { return 1; }</font>


   <font color=#229933>// non-interface functions and variables:</font>
   
      static void   makeHannWindow        (double* output, int blocksize);
      static void   windowSignal          (MazurkaTransformer& transformer,
		                           double* window, float* input);
   private: 

      int                mz_minbin;       <font color=#229933>// minimum spectral bin to display</font>
      int                mz_maxbin;       <font color=#229933>// maximum spectral bin to display</font>
      double            *mz_wind_buff;    <font color=#229933>// storage for the window</font>
      MazurkaTransformer mz_transformer;  <font color=#229933>// FFTW interface</font>
      
};


<font color=#cccccc>#endif <font color=#229933>// _MZSPECTROGRAMFFTW_H_INCLUDED</font></font>

</pre>


</td></tr>
</table>
</center>




</body>
</html>
   
